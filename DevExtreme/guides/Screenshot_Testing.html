<!--
title: Screenshot Testing
description: 
published: true
date: 2022-04-18T12:38:19.919Z
tags: 
editor: ckeditor
dateCreated: 2022-04-18T12:34:41.704Z
-->

<h2><strong>Screenshot reporter</strong></h2>
<p><a href="http://jsserver:8500/">http://jsserver:8500</a></p>
<p>Add&nbsp;<strong>&amp;mark=true</strong>&nbsp;to the path if you want to enable the ability to replace a batch of screenshots</p>
<p><strong>Repository</strong>&nbsp;</p>
<p><a href="https://github.com/DevExpress/testcafe-visual-testing">github.com/DevExpress/testcafe-visual-testing</a></p>
<p><strong>Как обновить&nbsp;Screenshow reporter?</strong></p>
<p>Надо переопубликовать солюшен, лежащий в testcafe-visual-testing\screenshot-reporter</p>
<p>&nbsp;</p>
<h2><strong>Etalons and masks and actuals location</strong></h2>
<pre><code class="language-plaintext">\\corp\builds\release\Store\DevExtreme\TestCafeTestingEtalons\XX.Y\
\\corp\builds\release\DevExtreme\TestCafeTestingArtifacts\ХХ.Х</code></pre>
<p>Пути сконфигурированные для разных сквадовых тасок (например, для навигации), находятся здесь:</p>
<pre><code class="language-plaintext">HG\DevExtreme.Testing\DevExtreme.Testing.TestCafeRunner\Tests\Navigation\config.json</code></pre>
<p>&nbsp;</p>
<h2><strong>Local Run</strong></h2>
<h3><strong>Prepare Environment</strong></h3>
<ul>
  <li><strong>To test a custom app or web site</strong>
    <ul>
      <li>Run&nbsp;<i>DevExtreme.Testing\PrepareTestingEnvironment.cmd.</i></li>
    </ul>
  </li>
  <li><strong>To test an&nbsp;RWA demo</strong>
    <ul>
      <li>Run&nbsp;<i>DevExtreme.Testing\PrepareTestingEnvironment.cmd.</i></li>
      <li>Build the demo.&nbsp;Requires that&nbsp;<i>PrepareWorkspace.cmd</i>&nbsp;and&nbsp;<i>Packer.cmd</i>&nbsp;have been run (in administrator mode).</li>
    </ul>
  </li>
  <li><strong>To test a WidgetsGallery demo</strong>
    <ul>
      <li>Run&nbsp;<i>DevExtreme.Testing\PrepareTestingEnvironment.cmd</i>.</li>
      <li>Run&nbsp;<i>DevExtreme.Testing\PrepareWGForTesting.cmd</i>. Before it, run the following scripts at least once (<strong>in administrator mode</strong>):<ul>
          <li><i>PrepareWorkspace.cmd</i></li>
          <li><i>Packer.cmd</i></li>
          <li><i>Demos\WidgetsGallery\PrepareWG.cmd (not need in 20.2+)</i></li>
          <li><i>Demos\WidgetsGallery\PrepareDevExtremeBundles.cmd</i></li>
        </ul>
      </li>
      <li>Build the <i>Demos\WidgetsGallery\TestCafeTestCreator\TestCafeTestCreator.csproj</i><br><br>&nbsp;</li>
    </ul>
  </li>
</ul>
<h3><strong>Run Tests</strong></h3>
<p>Run the&nbsp;<i>Run.cmd</i>&nbsp;script located in a folder with the required tests (<i>DevExtreme.Testing\DevExtreme.Testing.TestCafeRunner\Tests\...</i>).</p>
<p>To run autogenerated WidgetsGallery tests</p>
<ul>
  <li>Call&nbsp;<i>Demos\WidgetsGallery\TestCafeTestCreator\bin\Debug\TestCafeTestCreator.exe</i>&nbsp;with appropriate arguments. For example:</li>
</ul>
<pre><code class="language-plaintext">cd Demos\WidgetsGallery\TestCafeTestCreator\bin\Debug
TestCafeTestCreator.exe createTests=true sectionName=Editors approach=jQuery</code></pre>
<p>or</p>
<pre><code class="language-plaintext">cd Demos\WidgetsGallery\TestCafeTestCreator\bin\Debug
TestCafeTestCreator.exe createTests=true sectionName=Charts approach=Angular groups="Line_Charts,Pie_Charts,Point_Charts,Polar_and_Radar_Charts,Range_Charts,Sparkline_Charts,Tree_Map" part=2
</code></pre>
<ul>
  <li>Run&nbsp;<i>DevExtreme.Testing\DevExtreme.Testing.TestCafeRunner\Tests\WidgetsGallery\run.cmd</i></li>
</ul>
<p>Run the '<i>DevExtreme TestCafe Demos Build (20.2 tip)</i>' task before running your testing task on the farm to prepare testing environment with your latest changes.</p>
<p>Check the&nbsp;<i>common-bin\testcafe-results.screenshots.xml</i>&nbsp;and&nbsp;<i>common-bin\TestCafeOutput\diffs</i>&nbsp;for tests results.</p>
<p>&nbsp;</p>
<h2><strong>Modify Wrappers Sources</strong></h2>
<p>By the case of React:</p>
<p><code>Demos\WidgetsGallery\PrepareDevExtremeBundles.cmd</code>&nbsp;pulls sources from the devextreme-react repo. To run WG tests with modifed wrappers source:</p>
<ul>
  <li>go to local devextreme-react repo and execute</li>
</ul>
<p>npm&nbsp;run&nbsp;pack
</p>
<ul>
  <li>go&nbsp;to hg\mobile repo</li>
  <li>copy devextreme-react\npm\ dir content to Demos\WidgetsGallery\WidgetsGallery\prepare\npm-scripts\npm-devextreme-react\</li>
  <li>delete Demos\WidgetsGallery\WidgetsGallery\JSDemos\js\devextreme.react.systemjs.js</li>
  <li>go to \Demos\WidgetsGallery\WidgetsGallery\prepare\build-npm-bundles and execute</li>
</ul>
<p>npm&nbsp;run&nbsp;start-react-test-bundle
</p>
<p>&nbsp;</p>
<h2><strong>Adding a Test</strong></h2>
<p>По умолчанию скриншотное тестрование демки достаточно простое - открыть, дождаться готовности виджетов, снять скриншот. Однако перед снятие скриншота можно выполнить js код на странице. Для этого файлик с кодом нужно положить в папку с демкой (рядом с папками по подходам) и назвать его test-code.js. Код один для всех платформ, выполняется на&nbsp;<strong>клиенте</strong>.</p>
<p>Существует также возможность добавить полноценный testcafe сценарий, который будет выполнен перед скриншотом.</p>
<p>Для этого в ту же директорию добавляется файлик testcafe-test-code.js с примерно следующим содержимым</p>
<pre><code class="language-plaintext">async&nbsp;t&nbsp;=&gt;&nbsp;{​​​​
&nbsp;&nbsp;&nbsp; // t - test controller (https://devexpress.github.io/testcafe/documentation/test-api/test-code-structure.html#test-controller)
&nbsp;&nbsp;&nbsp; // for example:
&nbsp;&nbsp;&nbsp;&nbsp;// await&nbsp;t.click('.some-selector');&nbsp;&nbsp; 
}​​​​​​​​​​​</code></pre>
<p><strong>How to add a test?</strong></p>
<ul>
  <li>Create a new folder in <i>DevExtreme.Testing\DevExtreme.Testing.TestCafeRunner\Tests</i>. Put WidgetGallery demos tests to the <i>WidgetsGallery</i> subfolder.</li>
  <li>Add the config.json file to the created folder. This file should look like the following:</li>
</ul>
<pre><code class="language-plaintext">{​​​​​​​​​​​​
    "browsers": ["chrome", "ie", "firefox"],
    "etalonsPath": "\\\\corp\\builds\\release\\Store\\DevExtreme\\TestCafeTestingEtalons\\20.2\\MyTests",
    "diffsPath" : "\\\\corp\\builds\\release\\DevExtreme\\TestCafeTestingArtifacts\\20.2\\MyTests"
}​​​​​​​​​​​​​​​​​​​
</code></pre>
<ul>
  <li>Add test files that end with ".test.js". Sample test file:</li>
</ul>
<pre><code class="language-plaintext">import&nbsp;{​​​​​​​​​​​​​​​​​​​&nbsp;makeScreenShotTestCafe }​​​​​​​​​​​​​​​​​​​&nbsp;from&nbsp;"../helpers/screenshot_maker.js";

fixture`myFixture`
&nbsp;&nbsp;&nbsp; .page`http://localhost:82/`;

test('test1',&nbsp;async&nbsp;t&nbsp;=&gt;&nbsp;{​​​​​​​​​​​​​​​​​​​
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;t.resizeWindow(480,&nbsp;1080);
&nbsp;&nbsp;&nbsp;&nbsp;await t.expect(await&nbsp;makeScreenShotTestCafe("Test1_Screenshot1")).ok();
}​​​​​​​​​​​​​​​​​​​);

</code></pre>
<ul>
  <li>Add <i>run.cmd </i>script. This script runs tested application and calls TestCafeRunner. Do not forget to kill the executed application when testing finishes. Sample run.cmd:</li>
</ul>
<pre><code class="language-plaintext">@echo off
set test_config=%~dp0\config.json
set exitCode=0

::Run app
call ..\helpers\run.app.cmd ..\..\..\..\Demos\GolfClub\bin\PublishResult 8082 || exit /b 1
timeout /t 3

::Run tests
cd ..\..\..\..\common-bin
call DevExtreme.Testing.TestCafeRunner.exe --test-config=%test_config% || set exitCode=1
call taskkill /F /IM iisexpress.exe
exit /b %exitCode%</code></pre>
<ul>
  <li>Add <i>test-code.js</i> if necessary for autogenerated tests. Sample to wait while elements are being rendered:</li>
</ul>
<pre><code class="language-plaintext">new Promise(resolve =&gt; {​​​​​​​​​​​​​​​​​​​
 &nbsp;&nbsp;&nbsp;const interval = setInterval(() =&gt; {​​​​​​​​​​​​​​​​​​​
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();
&nbsp;&nbsp;&nbsp;&nbsp;}​​​​​​​​​​​​​​​​​​​, 2000);
}​​​​​​​​​​​​​​​​​​​);
</code></pre>
<p>&nbsp;</p>
<h2><strong>TestCafe Helpers</strong></h2>
<p>The following helper scripts are available in the <i>mobile\DevExtreme.Testing\DevExtreme.Testing.TestCafeRunner\Tests\helpers</i> folder:</p>
<h3>JS Helpers</h3>
<ul>
  <li><strong>screenshort-comparer.ts</strong></li>
</ul>
<p>Take single screenshot and validate it:</p>
<pre><code class="language-plaintext">import {​​​​​​​ createScreenshotsComparer, compareScreenshot }​​​​​​​ from '../../helpers/screenshort-comparer';
test('Full size pager', async (t) =&gt; {​​​​​​​​
    await t
        .expect(await compareScreenshot(t, 'pager-full-allpages.png'))
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</code></pre>
<p>&nbsp;</p>
<p>Take and validate several screenshots without breaking test on the first fail:</p>
<pre><code class="language-plaintext">// create comparer for collectin result
const {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ takeScreenshot, compareResults }​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ = createScreenshotsComparer(t);
await t
    ... // take the first screenshot
    .expect(await takeScreenshot('pager-1.png', pagerElement))
    ...// take another screenshot
    .expect(await takeScreenshot('pager-2.png', pagerElement))
    // check result and show erros
    .expect(compareResults.isValid())
    .ok(compareResults.errorMessages());</code></pre>
<p>Etalons are stored in the&nbsp;<i>.\etalons&nbsp;</i>folder near the test.</p>
<p>The local screenshots are not compatible with farm screenshot because they have been taken under Ubuntu. So to get a valid screenshot for the first time, commit tests&nbsp;without etalons and download etalons from artifacts (you can find&nbsp;it in the check tab of your pull request). After that you should copy them in to the&nbsp;<i>etalons</i>&nbsp;folder and commit.</p>
<pre><code class="language-plaintext">takeScreenshot(t: TestController, screenshotname: string, element? ,options: {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
  attempts: 3,
  attemptTimeout: 500,
  looksSameComparisonOptions
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​)</code></pre>
<p><strong>t</strong>&nbsp;- test controller of executing test only for single scenario</p>
<p><strong>screenshotname</strong>&nbsp;- screenshot file name</p>
<p><strong>element</strong>&nbsp;- screenshoted element or null (default) for take full browser screenshot</p>
<p><strong>options:</strong></p>
<p>&nbsp; &nbsp;&nbsp;<strong>attemps</strong>&nbsp;- the cout of attempts to get a valid screenshot</p>
<p>&nbsp; &nbsp;&nbsp;<strong>attempTimeout</strong>&nbsp;-&nbsp;timeout between attemps</p>
<p>&nbsp;</p>
<h3><strong>screenshot_maker.js</strong></h3>
<p>Makes and validates screenshots. This module provides the following exports:</p>
<p><strong>makeScreenshotTestCafe(shotName, [attemptInterval])</strong></p>
<p>Makes a screenshot and returns the screenshot validation result. Performs up to 3 attempts to make a valid screenshot waiting <strong>attemptInterval</strong>&nbsp;milliseconds after each attempt. The default <strong>attemptInterval</strong>&nbsp;value is 1000.&nbsp;</p>
<p><strong>NOTE: This method automatically adds the browser name to the screenshot name.</strong></p>
<pre><code class="language-plaintext">import {​​​​​​​​​​​​​​​​ makeScreenShotTestCafe, validateScreenshots }​​​​​​​​​​​​​​​​​​​​​​​ from "../helpers/screenshot_maker.js";
...
test('test1', async t =&gt; {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
    ...
&nbsp;   await t.expect(await makeScreenshotTestCafe("Test1_Screenshot1")).ok() 
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

test('test2',&nbsp;async&nbsp;t&nbsp;=&gt;&nbsp;{​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;t.expect(await&nbsp;makeScreenshotTestCafe("Test2_Screenshot1", 2000)).ok() 
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
</code></pre>
<p>&nbsp;</p>
<p><strong>validateScreenshots()</strong></p>
<p>Returns a value that indicates whether all screenshots made during the current test are valid.</p>
<pre><code class="language-plaintext">import {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ makeScreenShotTestCafe, validateScreenshots }​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ from "../helpers/screenshot_maker.js";
...
//&nbsp;Validate&nbsp;several&nbsp;screenshots
test('test3',&nbsp;async&nbsp;t&nbsp;=&gt;&nbsp;{​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;makeScreenshotTestCafe("Test3_Screenshot1");
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;makeScreenshotTestCafe("Test3_Screenshot2",&nbsp;2000);
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;makeScreenshotTestCafe("Test3_Screenshot3",&nbsp;2000);
&nbsp;&nbsp;&nbsp;&nbsp;...
&nbsp;&nbsp;&nbsp;&nbsp;await&nbsp;t.expect(await&nbsp;validateScreenshots()).ok()
}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​</code></pre>
<p>&nbsp;</p>
<h3><strong>jquery_selectors.js</strong></h3>
<p>Wraps a TestCafe selector to support jQuery selectors syntax.</p>
<pre><code class="language-plaintext">import $ from '../helpers/jquery_selectors.js';
...
await t.click($(".dx-dropdowneditor-icon:eq(0)"));</code></pre>
<h3><strong>mockdate.js</strong></h3>
<p>Mocks the Date object to set the specified date as current. Link this script to the tested page.</p>
<pre><code class="language-plaintext">fixture`golfclub`
    .page`http://localhost:82/`
    .clientScripts(
        '../helpers/mockdate.js',
        {​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ content: 'MockDate.set(new Date(2015, 8, 4));' }​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
    );</code></pre>
<h3><strong>get_browser_name.js</strong></h3>
<p>Returns the current browser name.</p>
<p><strong>NOTE: Do not use this helper to modify the screenshot name passed to the makeScreenshotTestCafe method, because this method does it.</strong></p>
<pre><code class="language-plaintext">import getBrowserName from "../helpers/get_browser_name";
...
const browserName = await getBrowserName();</code></pre>
<h2>&nbsp;</h2>
<h3>Batch Helpers</h3>
<p><strong>run.app.cmd</strong></p>
<p>Runs a web application using iisexpress. Accepts <strong>folder</strong> and <strong>port</strong> arguments.</p>
<p>call&nbsp;..\helpers\run.app.cmd&nbsp;..\..\..\..\Demos\DevAV\bin\PublishResult&nbsp;8082
</p>
<p><strong>NOTE: Do not forget to kill the iisexpress.exe process after test has finished.</strong></p>
<p><strong>NOTE: Please use port value higher than 1024. Otherwise, IISExpress.exe requires administrator privileges.</strong><br>&nbsp;</p>
<p><strong>run.widgetsgallery.cmd</strong></p>
<p>Runs&nbsp; the following applications:</p>
<ul>
  <li><i>DevExtreme.NetCore.Demos</i> - port 5001</li>
</ul>
<p><i>DevExtreme.MVC.Demos</i> - port 5002</p>
<p><i>WidgetsGallery.DataService </i>- port 5003</p>
<p><i>WidgetsGallery </i>- port 5004</p>
<p>call&nbsp;..\helpers\run.widgetsgallery.cmd
</p>
<p><strong>NOTE: Do not forget to kill the iisexpress.exe and&nbsp;DevExtreme.NETCore.Demos.exe&nbsp;processes&nbsp;after test&nbsp;run has finished.</strong></p>
<p>&nbsp;</p>
<h2><strong>Demos Screenshot testing (21.2+)</strong></h2>
<p>Doc hosted on GitHub</p>
<p><a href="https://github.com/DevExpress/devextreme-internal-docs/blob/master/docs/testcafe_demos_tests.md">https://github.com/DevExpress/devextreme-internal-docs/blob/master/docs/testcafe_demos_tests.md</a></p>
<p>&nbsp;</p>
<h2><strong>Running Demos Screenshot tests using WSL (21.2+)</strong></h2>
<p><strong>#Install Windows terminal:</strong><br>Release version <a href="https://www.microsoft.com/store/productId/9N0DX20HK701"><i>https://www.microsoft.com/store/productId/9N0DX20HK701</i></a><br>or<br>Preview version <a href="https://www.microsoft.com/store/productId/9N8G5RFZ9XK3"><i>https://www.microsoft.com/store/productId/9N8G5RFZ9XK3</i></a></p>
<p><strong>#Install WSL and set default profile to WSLv2</strong><br><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10"><i>https://docs.microsoft.com/en-us/windows/wsl/install-win10</i></a></p>
<blockquote>
  <p>wsl --set-default-version 2</p>
</blockquote>
<p><strong>#Install Ubuntu 20.04 LTS</strong><br><a href="https://www.microsoft.com/store/productId/9N6SVWS3RX71"><i>https://www.microsoft.com/store/productId/9N6SVWS3RX71</i></a></p>
<p><strong>#Configure Ubuntu</strong></p>
<p>Run Ubuntu from MS Store App (Launch button)</p>
<p>In the opened terminal - Configure user name</p>
<p>Close the terminal window</p>
<p><strong>#Update Ubuntu to WSLv2 (if necessary)</strong></p>
<p>Check current ubuntu WSL version:</p>
<p>in Windows terminal, run the following command</p>
<blockquote>
  <p>wsl --list -v</p>
</blockquote>
<p>If Ubuntu20.04 WSL version is 1 - follow the instructions from the link below<br><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10"><i>https://docs.microsoft.com/en-us/windows/wsl/install-win10</i></a></p>
<p><strong>#Open Windows terminal and run ubuntu</strong><br>(Use the drop-down (V) sign at the top-right corner)</p>
<p><strong>#Go to the home user dir:</strong></p>
<blockquote>
  <p>cd ~</p>
</blockquote>
<p><strong>#Create SSH key:</strong></p>
<blockquote>
  <p>ssh-keygen</p>
</blockquote>
<p><strong>#Copy public key:</strong></p>
<blockquote>
  <p>cat ~/.ssh/id_rsa.pub | clip.exe</p>
</blockquote>
<p><strong>#Add new key to your account:</strong><br><a href="https://github.com/settings/ssh/new"><i>https://github.com/settings/ssh/new</i></a></p>
<p><strong>#Install nvm:</strong></p>
<blockquote>
  <p>sudo apt-get update<br>sudo apt install curl<br>curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash<br>source ~/.profile</p>
</blockquote>
<p><strong>#Install node:</strong></p>
<blockquote>
  <p>nvm install node</p>
</blockquote>
<p><strong>#Install google chrome:</strong></p>
<blockquote>
  <p>sudo apt-get install -y curl unzip xvfb libxi6 libgconf-2-4<br>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb<br>sudo apt -y install ./google-chrome-stable_current_amd64.deb</p>
  <p>apt --fix-broken install</p>
  <p>alias chrome:headless='google-chrome --disable-gpu --headless "$1" &amp;&gt; /dev/null'</p>
</blockquote>
<p><br><strong>#Clone devextreme-demos repository</strong></p>
<blockquote>
  <p>mkdir github<br>cd github<br>git clone git@github.com:YOUR_USER_NAME/devextreme-demos.git -b 21_2</p>
  <p>cd devextreme-demos<br>git remote add upstream git@github.com:DevExpress/devextreme-demos.git</p>
</blockquote>
<p><strong>#Open repository in VS Code</strong></p>
<p>VS code will open on Windows</p>
<blockquote>
  <p>cd devextreme-demos<br>code .</p>
</blockquote>
<p><strong>#Install dependencies in bash:</strong></p>
<p><i>Ctrl+~</i></p>
<blockquote>
  <p>npm i</p>
</blockquote>
<p><strong>#Run test:</strong></p>
<blockquote>
  <p>npm run test-testcafe accordion-overview-jquery</p>
</blockquote>
<p>&nbsp;</p>
<h2><strong>Screenshot tests</strong></h2>
<p><a href="https://teams.microsoft.com/l/message/19:3b800cc6293240109b61db84a2163c9d@thread.skype/1610529200655?tenantId=e4d60396-9352-4ae8-b84c-e69244584fa4&amp;groupId=8c31b3e5-5870-46b1-92a7-180d13b282ed&amp;parentMessageId=1610529200655&amp;teamName=DevExtreme&amp;channelName=Scheduler%20Internal&amp;createdTime=1610529200655">Andrey Makarov (DevExpress): Scheduler Internal Как писать скришотные тесты В …</a></p>
<p>+</p>
<p><a href="https://teams.microsoft.com/l/message/19:66b1be1a5ad34d56bf64773645b498c2@thread.skype/1604571448507?tenantId=e4d60396-9352-4ae8-b84c-e69244584fa4&amp;groupId=8c31b3e5-5870-46b1-92a7-180d13b282ed&amp;parentMessageId=1604571448507&amp;teamName=DevExtreme&amp;channelName=Grids%20Internal&amp;createdTime=1604571448507">Michael Vitik (DevExpress): Screenshot-ное тестирование</a></p>
<p><strong>Если нет скриншотов в артефактах:</strong></p>
<p>Если в матрице тестов "testcafe_tests.yml" падает одна быстрая таска (например там нестабильный тест), то остальные абортятся и у них не будет скриншотов в артефактах.</p>
<p>Для обхода этой проблемы и получения скриншотов можно оставить в матрице только свою таску, см "ARGS" в "testcafe_tests.yml"</p>
<p><strong>Как получить эталоны:</strong></p>
<p>Скачать артефакты и из каталога&nbsp;"compared-screenshots" взять картинки как эталоны, у них должен быть размер как у нужного DOM элемента</p>
<p><strong>Don't forget:</strong></p>
<p>Дописать '.png':&nbsp;await&nbsp;takeScreenshot(`myScreenShotFileName.<strong>png</strong>`,&nbsp;'#container')</p>
